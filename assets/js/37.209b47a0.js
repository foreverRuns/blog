(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{720:function(s,a,e){"use strict";e.r(a);var t=e(42),r=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("p",[s._v("本文是移植一个使用 pcsc 的 qt 项目到树莓派上的一些笔记。")]),s._v(" "),a("h2",{attrs:{id:"登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#登录"}},[s._v("#")]),s._v(" 登录")]),s._v(" "),a("h3",{attrs:{id:"串口登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#串口登录"}},[s._v("#")]),s._v(" 串口登录")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("将 SD 卡使用读卡器连接到电脑上并打开 SD 卡盘符，修改 "),a("code",[s._v("config.txt")]),s._v(" 和 "),a("code",[s._v("cmdline.txt")]),s._v(" 文件")]),s._v(" "),a("ul",[a("li",[s._v("解除蓝牙对串口的占用，在 config.txt 文件最后添加:")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dtoverlay")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("pi3-miniuart-bt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("修改根目录的 "),a("code",[s._v("cmdline.txt")]),s._v("，将里面的内容全部替换成以下内容。以防万一，请先备份好这个文件。")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dwc_otg.lpm_enable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("console")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("tty1 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("console")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("serial0,115200 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("root")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/dev/mmcblk0p2 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rootfstype")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ext4 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("elevator")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("deadline "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("fsck.repair")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes rootwait\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("利用 USB 转 TTL 将树莓派和电脑连接")]),s._v(" "),a("ul",[a("li",[s._v("TTL_RXD -> Raspberry_TXD")]),s._v(" "),a("li",[s._v("TTL_TXD -> Raspberry_RXD")]),s._v(" "),a("li",[s._v("TTL_GND -> Raspberry_GND")])])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/foreverRuns/image-hosting@main/blog/raspberry.6zbvghvp6tc0.png",alt:"raspberry"}})]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("用 SecureCRT 串口登陆")])]),s._v(" "),a("ul",[a("li",[s._v("打开 SecureCRT 软件，选择 "),a("code",[s._v("文件")]),s._v(" -> "),a("code",[s._v("快速连接")])]),s._v(" "),a("li",[s._v("协议选择 "),a("code",[s._v("serial")]),s._v(" 波特率选择上面 "),a("code",[s._v("cmdline.txt")]),s._v(" 中设置的 "),a("code",[s._v("115200")]),s._v("，端口从 PC 设备管理器中查看")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/foreverRuns/image-hosting@main/blog/com.78v7uaqgrhmo.png",alt:"com"}}),s._v(" "),a("img",{attrs:{src:"https://cdn.staticaly.com/gh/foreverRuns/image-hosting@main/blog/serial_set.6lys17r1bwu8.png",alt:"serial_set"}})]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("默认账号：pi"),a("br"),s._v("\n默认密码：raspberry")])]),s._v(" "),a("h3",{attrs:{id:"ssh-远程登陆-网络登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh-远程登陆-网络登录"}},[s._v("#")]),s._v(" ssh 远程登陆（网络登录）")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("树莓派通过网线直连PC，然后选择共享我们的本机网络。")]),s._v(" "),a("ul",[a("li",[s._v("PC 通过 WLAN (wifi) 上网")]),s._v(" "),a("li",[a("code",[s._v("更改适配器设置")]),s._v(" 界面中选择修改 "),a("code",[s._v("WLAN")]),s._v(" 属性。选择共享，设置共享网络给以太网。")]),s._v(" "),a("li",[s._v("打开控制台，"),a("code",[s._v("arp -a")]),s._v(" 查看树莓派的IP")])])]),s._v(" "),a("li",[a("p",[s._v("树莓派通过网线连接路由器上网，或者通过 wifi 上网。")]),s._v(" "),a("ul",[a("li",[s._v("使用 HDMI 视频线外接显示器，启动树莓派")]),s._v(" "),a("li",[s._v("打开树莓派终端，设置一下IP地址，并开启树莓派 ssh 功能")])])])]),s._v(" "),a("p",[s._v("不管通过哪一种，最终要知道树莓派的IP地址，最好设置成固定IP，然后通过 secureCRT 的 SSH 连接树莓派")]),s._v(" "),a("ul",[a("li",[s._v("打开 SecureCRT 软件，选择 "),a("code",[s._v("文件")]),s._v(" -> "),a("code",[s._v("快速连接")])]),s._v(" "),a("li",[s._v("协议选择 "),a("code",[s._v("SSH2")]),s._v("， 主机名填写 "),a("code",[s._v("树莓派的ip地址")]),s._v("，用户名默认 "),a("code",[s._v("pi")])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/foreverRuns/image-hosting@main/blog/ssh.2chki6i9gghs.png",alt:"ssh"}})]),s._v(" "),a("h2",{attrs:{id:"更换更新源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更换更新源"}},[s._v("#")]),s._v(" 更换更新源")]),s._v(" "),a("p",[s._v("把更新源改成国内的服务器，不然后面一些安装会很慢或者直接失败")]),s._v(" "),a("ol",[a("li",[s._v("查看树莓派版本")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("lsb_release "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("No LSB modules are available.\nDistributor ID: Raspbian\nDescription:    Raspbian GNU/Linux 10 (buster)\nRelease:        10\nCodename:       buster")]),s._v(" "),a("p",[s._v("如上，可以查出版本为 "),a("code",[s._v("buster")]),s._v("，即 "),a("code",[s._v("Debian 10")])]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("备份源文件")])]),s._v(" "),a("blockquote",[a("p",[s._v("更新的源文件主要有 "),a("code",[s._v("/etc/apt/sources.list")]),s._v("（软件更新源）和 "),a("code",[s._v("/etc/apt/sources.list.d/raspi.list")]),s._v("（系统更新源）")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /etc/apt/sources.list /etc/apt/sources.list.bak\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /etc/apt/sources.list.d/raspi.list /etc/apt/sources.list.d/raspi.list.bak\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("更新源文件")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑 `/etc/apt/sources.list` 文件，删除原文件所有内容，用以下内容取代：")]),s._v("\ndeb "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("arch"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("armhf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main non-free contrib rpi\ndeb-src http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main non-free contrib rpi\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果需要 arm64 软件源，在 `/etc/apt/sources.list` 中加上")]),s._v("\ndeb "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("arch"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("arm64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" http://mirrors.tuna.tsinghua.edu.cn/raspbian/multiarch/ buster main\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑 `/etc/apt/sources.list.d/raspi.list` 文件，删除原文件所有内容，用以下内容取代：")]),s._v("\ndeb http://mirrors.tuna.tsinghua.edu.cn/raspberrypi/ buster main\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("修改完毕后，执行更新命令")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/blueberry-mint/p/16060251.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("具体参考这里"),a("OutboundLink")],1)])]),s._v(" "),a("h2",{attrs:{id:"安装开发运行环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装开发运行环境"}},[s._v("#")]),s._v(" 安装开发运行环境")]),s._v(" "),a("h3",{attrs:{id:"qt-环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#qt-环境"}},[s._v("#")]),s._v(" qt 环境")]),s._v(" "),a("ol",[a("li",[s._v("查看一下内存，看是否满足安装的最低需求")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v("\n\nFilesystem      Size  Used Avail Use% Mounted on\n/dev/root        14G  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".5G  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(".9G  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("34")]),s._v("% /\ndevtmpfs        430M     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  430M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev\ntmpfs           462M     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  462M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev/shm\ntmpfs           462M   47M  415M  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("% /run\ntmpfs           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".0M  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".0M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /run/lock\ntmpfs           462M     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  462M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /sys/fs/cgroup\n/dev/mmcblk0p1  253M   49M  204M  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("% /boot\ntmpfs            93M  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K   93M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /run/user/1000\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("安装")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" qt5-default    // 默认基本库\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sudo apt-get install qtcreator")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[s._v("这个项目是以前 qtcreator 创建的，这里我直接在树莓派上编译，我是直接远程 VScode 打开工程目录，直接修改相关文件后命令行直接编译，不需要 qtcreator，\n如果需要 qtcreator，那就直接交叉编译，不然树莓派跑 qtcreator 太卡")])]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("卸载")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" autoremove qtcreator\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"pcsc-lite"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pcsc-lite"}},[s._v("#")]),s._v(" pcsc-lite")]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("PCSC-Lite")]),s._v(" 是 "),a("code",[s._v("Personal Computer/Smart Card Lite")]),s._v(" 的缩写。")])]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("pcsc-lite")]),s._v(" 是在 "),a("code",[s._v("libusb")]),s._v(" 基础上开发的。因此也需要安装 "),a("code",[s._v("libusb")]),s._v("。")])]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("pcsc-lite")]),s._v(" 包含一个 "),a("code",[s._v("pcscd")]),s._v(" 守护进程 和 一个被调用的库 "),a("code",[s._v("libpcsclite.so")])])]),s._v(" "),a("ol",[a("li",[s._v("安装")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libusb-dev\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libpcsclite-dev\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" pcscd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("查看头文件跟库路径")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("dpkg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-L")]),s._v(" libpcsclite-dev\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("打印如下:")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("/.\n/usr\n/usr/bin\n/usr/bin/pcsc-spy\n/usr/include\n/usr/include/PCSC\n/usr/include/PCSC/debuglog.h\n/usr/include/PCSC/ifdhandler.h\n/usr/include/PCSC/pcsclite.h\n/usr/include/PCSC/reader.h\n/usr/include/PCSC/winscard.h\n/usr/include/PCSC/wintypes.h\n/usr/lib\n/usr/lib/arm-linux-gnueabihf\n/usr/lib/arm-linux-gnueabihf/libpcscspy.so.0.0.0\n/usr/lib/arm-linux-gnueabihf/pkgconfig\n/usr/lib/arm-linux-gnueabihf/pkgconfig/libpcsclite.pc\n/usr/share\n/usr/share/doc\n/usr/share/doc/libpcsclite-dev\n/usr/share/doc/libpcsclite-dev/changelog.Debian.gz\n/usr/share/doc/libpcsclite-dev/changelog.gz\n/usr/share/doc/libpcsclite-dev/copyright\n/usr/share/doc/libpcsclite-dev/examples\n/usr/share/doc/libpcsclite-dev/examples/pcsc_demo.c.gz\n/usr/share/man\n/usr/share/man/man1\n/usr/share/man/man1/pcsc-spy.1.gz\n/usr/lib/arm-linux-gnueabihf/libpcsclite.so\n/usr/lib/arm-linux-gnueabihf/libpcscspy.so.0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br")])]),a("blockquote",[a("p",[s._v("include："),a("code",[s._v("/usr/include/PCSC")]),a("br"),s._v("\nlib: "),a("code",[s._v("/usr/lib/arm-linux-gnueabihf/libpcsclite.so")])])]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("查看 pcscd 是否运行")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-aux")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" pcscd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("查看 usb 设备")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("lsusb\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"安装-ccid-驱动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-ccid-驱动"}},[s._v("#")]),s._v(" 安装 CCID 驱动")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" dpkg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" libacsccid1_1.1.6-1acr350_armhf.deb\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"项目移植"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目移植"}},[s._v("#")]),s._v(" 项目移植")]),s._v(" "),a("ol",[a("li",[s._v("打开 SecureCRT，通过 SSH 登录树莓派，在 SecureCRT 的工具栏最后边，打开 SecureFX，通过 SecureFX 把之前的项目工程拉到树莓派中")]),s._v(" "),a("li",[s._v("PC 端打开 VScode，安装 "),a("code",[s._v("Remote Development")]),s._v(" 扩展")]),s._v(" "),a("li",[s._v("在 VScode 中 "),a("code",[s._v("Ctrl + Shift + p")]),s._v(" 打开命令输入框，输入"),a("code",[s._v("remote ssh")]),s._v("，在弹出的下拉列表中，选择 "),a("code",[s._v("Add New SSH Host")]),s._v("，输入 "),a("code",[s._v("ssh pi@192.168.91.102")]),s._v(" (账户名@IP地址)，回车然后选择ssh配置保存目录")]),s._v(" "),a("li",[s._v("继续打开命令输入框，输入"),a("code",[s._v("remote ssh")]),s._v("，在弹出的下拉列表中，选择 "),a("code",[s._v("Connect to Host")]),s._v("，在弹出的输入框选择我们之前配置的主机地址，然后输入密码就好了。（默认密码：raspberry）")]),s._v(" "),a("li",[s._v("打开放在树莓派上的项目，按需求修改...")]),s._v(" "),a("li",[s._v("项目根目录下新建 "),a("code",[s._v("build")]),s._v(" 目录，然后")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" build/debug\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" build/debug\nqmake "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/helloQt "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CONFIG")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v("debug\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"知识小解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#知识小解"}},[s._v("#")]),s._v(" 知识小解")]),s._v(" "),a("h3",{attrs:{id:"查看-sudo-apt-get-install-所安装的软件所在位置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看-sudo-apt-get-install-所安装的软件所在位置"}},[s._v("#")]),s._v(" 查看 sudo apt-get install 所安装的软件所在位置")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dpkg -L 软件名")]),s._v("\ndpkg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-L")]),s._v(" qtcreator\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("默认安装位置:")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("下载的软件的存放位置："),a("code",[s._v("/var/cache/apt/archives")])])]),s._v(" "),a("li",[a("p",[s._v("安装后软件的默认位置："),a("code",[s._v("/usr/share")])])]),s._v(" "),a("li",[a("p",[s._v("可执行文件位置："),a("code",[s._v("/usr/bin")])])]),s._v(" "),a("li",[a("p",[s._v("配置文件位置："),a("code",[s._v("/etc")])])]),s._v(" "),a("li",[a("p",[s._v("lib文件位置："),a("code",[s._v("/usr/lib")])])])]),s._v(" "),a("h3",{attrs:{id:"dep-文件的卸载与安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dep-文件的卸载与安装"}},[s._v("#")]),s._v(" dep 文件的卸载与安装")]),s._v(" "),a("ul",[a("li",[s._v("安装")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" dpkg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" name.deb\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("卸载")])]),s._v(" "),a("blockquote",[a("p",[s._v("注意： 软件名和软件的安装包名通常都是不一样的，找到自己的安装的软件后，才可以进行卸载。假如我们要卸载一个软件，我们可以使用 "),a("code",[s._v("sudo dpkg -l")]),s._v(" 来查看已经安装的软件有哪些，我们还可以通过 "),a("code",[s._v("grep")]),s._v(" 进行过滤。")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" dpkg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" aboutName\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" dpkg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" name\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"grep-基本介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#grep-基本介绍"}},[s._v("#")]),s._v(" grep 基本介绍")]),s._v(" "),a("p",[s._v("作用: 文本搜索工具，根据用户指定的 "),a("code",[s._v("模式（过滤条件)")]),s._v(" 对目标文本逐行进行匹配检查，打印匹配到的行。")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/m0_50370837/article/details/125068528",target:"_blank",rel:"noopener noreferrer"}},[s._v("grep 基本介绍"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"动态库找不到问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#动态库找不到问题"}},[s._v("#")]),s._v(" 动态库找不到问题")]),s._v(" "),a("p",[s._v("程序启动后，动态库会被动态加载到内存中，通过 "),a("code",[s._v("ldd(list dynamic dependencies)")]),s._v(" 命令可以检查动态库依赖关系。")]),s._v(" "),a("h4",{attrs:{id:"库文件的搜索路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#库文件的搜索路径"}},[s._v("#")]),s._v(" 库文件的搜索路径")]),s._v(" "),a("ul",[a("li",[s._v("在配置文件 "),a("code",[s._v("/etc/ld.so.conf")]),s._v(" 中指定动态库搜索路径")])]),s._v(" "),a("blockquote",[a("p",[s._v("需要添加其它库文件的路径，在文件的最后添加具体的路径即可，如: /usr/local/lib，添加后保存退出，然后在命令行 "),a("code",[s._v("ldconfig")]),s._v(" )")])]),s._v(" "),a("ul",[a("li",[s._v("通过环境变量 "),a("code",[s._v("LD_LIBRARY_PATH")]),s._v(" 指定动态库搜索路径")])]),s._v(" "),a("blockquote",[a("p",[s._v("当通过该环境变量指定多个动态库搜索路径时，路径之间用冒号 "),a("code",[s._v(":")]),s._v(" 分隔, 如："),a("code",[s._v("export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib")])])]),s._v(" "),a("ul",[a("li",[s._v("在编译目标代码时指定该程序的动态库搜索路径")])]),s._v(" "),a("blockquote",[a("p",[s._v("在编译目标代码时，通过 gcc 的参数 "),a("code",[s._v("-Wl,-Bsymbolic,-rpath=")]),s._v(" 指定程序的动态库搜索路径，当指定多个动态库搜索路径时，路之间用冒号 "),a("code",[s._v(":")]),s._v(" 分隔。如："),a("code",[s._v("LDFLAGS = -Wl,-rpath=.:/usr/local/lib")]),s._v(",\nQT 项目可以在 "),a("code",[s._v(".pro")]),s._v(" 中通过 "),a("code",[s._v("QMAKE_LFLAGS")]),s._v(" 添加（注意不是 "),a("code",[s._v("QMAKE_LDFLAGS")]),s._v("，没有D）, 如： "),a("code",[s._v("QMAKE_LFLAGS += -Wl,-Bsymbolic,-rpath=.:$$PWD/lib")])])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("默认的动态库搜索路径 "),a("code",[s._v("/lib")])])]),s._v(" "),a("li",[a("p",[s._v("默认的动态库搜索路径 "),a("code",[s._v("/usr/lib")])])])]),s._v(" "),a("h4",{attrs:{id:"库文件的搜索顺序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#库文件的搜索顺序"}},[s._v("#")]),s._v(" 库文件的搜索顺序")]),s._v(" "),a("p",[s._v("当系统加载可执行代码的时候，能够知道其所依赖的库的名字，但是还需要知道绝对路径。此时就需要系统的动态载入器来获取所依赖的动态库的绝对路径。")]),s._v(" "),a("p",[s._v("对于 "),a("code",[s._v("ELF")]),s._v(" 格式的可执行程序，是由 "),a("code",[s._v("ld-linux.so")]),s._v(" 来完成的，搜索的先后顺序是：")]),s._v(" "),a("ol",[a("li",[s._v("编译目标代码时指定的动态库搜索路径")]),s._v(" "),a("li",[s._v("环境变量 "),a("code",[s._v("LDLIBRARY_PATH")]),s._v(" 指定的动态库搜索路径")]),s._v(" "),a("li",[s._v("配置文件 "),a("code",[s._v("/etc/ld.so.conf")]),s._v(" 中指定的动态库搜索路径")]),s._v(" "),a("li",[s._v("默认的动态库搜索路径 "),a("code",[s._v("/lib")])]),s._v(" "),a("li",[s._v("默认的动态库搜索路径 "),a("code",[s._v("/usr/lib")])])]),s._v(" "),a("blockquote",[a("p",[s._v("注：ld-linux.so就是动态载入器，是专门用来负责定位、加载程序所需要的所有动态库文件。现在的Linux操作系统的可执行程序基本上都是ELF格式的。")])]),s._v(" "),a("h3",{attrs:{id:"qt-shadow-build"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#qt-shadow-build"}},[s._v("#")]),s._v(" QT shadow build")]),s._v(" "),a("p",[s._v("Shadow building means building a project in a separate directory, the build directory. The build directory is different from the source directory. One of the benefits of shadow building is that it keeps your source directory clean, which makes it faster to switch between build configurations. Therefore, shadow building is the best practice if you need many build configurations for a single set of source files.\nShadow builds are also widely known as out-of-source builds to separate them from in-source builds or in-tree builds.")]),s._v(" "),a("p",[s._v("影子构建意味着在单独的目录构建项目，即构建目录。生成目录与源目录不同。影子构建的好处之一是它可以保持源目录的干净，从而可以更快地在构建配置之间切换。因此，如果一组源文件需要许多构建配置，则影子构建是最佳实践。\n影子构建也被广泛称为源外构建，以将它们与源内构建或树内构建分开。")]),s._v(" "),a("ol",[a("li",[s._v("qtCreator 构建")])]),s._v(" "),a("p",[s._v("直接 "),a("code",[s._v("Project")]),s._v(" 选项设置相应的 debug release 模式 及 shadow build 路径即可")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("qmake 手动构建")])]),s._v(" "),a("p",[s._v("直接在 "),a("code",[s._v("shadow build")]),s._v(" 的路径下执行 "),a("code",[s._v("qmake .pro路径 CONFIG+=debug")])]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("CONFIG+=debug")]),s._v(" 是 Debug 模式，Release 模式不需要加")])]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("指定临时文件生成目录")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("BASEPATH "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/build\nCONFIG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("debug, debug"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("release"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    BUILDDIR "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${BASEPATH}")]),s._v("/debug\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    BUILDDIR "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${BASEPATH}")]),s._v("/release\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nOBJECTS_DIR "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${BUILDDIR}")]),s._v("/obj\nMOC_DIR "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${BUILDDIR}")]),s._v("/moc\nRCC_DIR "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${BUILDDIR}")]),s._v("/rcc\nUI_DIR "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${BUILDDIR}")]),s._v("/ui\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);